"use strict";(self["webpackChunkmbse_vue3"]=self["webpackChunkmbse_vue3"]||[]).push([[32],{89:function(e,l){l.Z=(e,l)=>{const a=e.__vccOpts||e;for(const[t,o]of l)a[t]=o;return a}},9032:function(e,l,a){a.r(l),a.d(l,{default:function(){return w}});var t=a(3396),o=a(4870),u=a(2655),r=a(7178);const d={class:"user-main"},s={class:"user-header"},m={class:"table"};var n={__name:"User",setup(e){const{proxy:l}=(0,t.FN)(),a=(0,o.iH)([]),n=(0,o.qj)([{prop:"software",label:"数字线程软件",width:260},{prop:"name",label:"工程负责人",width:260},{prop:"department",label:"工作部门",width:260},{prop:"phoneNumber",label:"电话",width:260}]),p=(0,o.qj)({total:0,page:1,limit:11,name:""});async function i(e){let t=await l.$api.getUserData(e);e.total=t.count,a.value=t.list.map((e=>e))}const w=e=>{p.page=e,i(p)},c=(0,o.qj)({keyword:""}),f=()=>{p.name=c.keyword,i(p)},h=(0,o.iH)(!1),_=e=>{u.T.confirm("确定关闭吗?").then((()=>{l.$refs.userForm.resetFields(),e()})).catch((()=>{}))},b=(0,o.qj)({name:"",phonenumber:1,software:"",department:""}),W=()=>{l.$refs.userForm.validate((async e=>{if(e)if("add"==v.value){let e=await l.$api.addUser(b);console.log("res",e),e&&(h.value=!1,l.$refs.userForm.resetFields(),i(p),(0,r.z8)({showClose:!0,message:"添加成功",type:"success"}))}else{let e=await l.$api.editUser(b);e&&(h.value=!1,l.$refs.userForm.resetFields(),i(p)),(0,r.z8)({showClose:!0,message:"编辑成功",type:"success"})}else(0,r.z8)({showClose:!0,message:"请输入正确的内容",type:"error"})}))},g=()=>{h.value=!1,l.$refs.userForm.resetFields()},v=(0,o.iH)("add"),y=e=>{console.log("handleEdit",e),h.value=!0,v.value="edit",l.$nextTick((()=>{Object.assign(b,e)}))},k=()=>{h.value=!0,v.value="add"},V=e=>{u.T.confirm("确定删除吗?").then((async()=>{await l.$api.deleteUser({id:e.id}),(0,r.z8)({showClose:!0,message:"删除成功",type:"success"}),i(p)})).catch((()=>{}))};return(0,t.bv)((()=>{i(p)})),(e,l)=>{const o=(0,t.up)("el-button"),u=(0,t.up)("el-input"),r=(0,t.up)("el-form-item"),i=(0,t.up)("el-form"),U=(0,t.up)("el-table-column"),C=(0,t.up)("el-table"),F=(0,t.up)("el-pagination"),$=(0,t.up)("el-col"),q=(0,t.up)("el-row"),z=(0,t.up)("el-dialog");return(0,t.wg)(),(0,t.iD)("div",d,[(0,t._)("div",s,[(0,t.Wm)(o,{type:"primary",onClick:k},{default:(0,t.w5)((()=>[(0,t.Uk)(" 新增 ")])),_:1}),(0,t.Wm)(i,{inline:!0,model:c},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{label:"请输入"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{modelValue:c.keyword,"onUpdate:modelValue":l[0]||(l[0]=e=>c.keyword=e),placeholder:"用户名/工作部门"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Wm)(o,{type:"primary",onClick:f},{default:(0,t.w5)((()=>[(0,t.Uk)("搜索")])),_:1})])),_:1})])),_:1},8,["model"])]),(0,t._)("div",m,[(0,t.Wm)(C,{data:a.value,style:{width:"100%"},height:"500px"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(n,(e=>((0,t.wg)(),(0,t.j4)(U,{key:e.label,label:e.label,prop:e.prop,width:e.width},null,8,["label","prop","width"])))),128)),(0,t.Wm)(U,{fixed:"right",label:"操作",width:"180"},{default:(0,t.w5)((e=>[(0,t.Wm)(o,{size:"small",onClick:l=>y(e.row)},{default:(0,t.w5)((()=>[(0,t.Uk)(" 编辑 ")])),_:2},1032,["onClick"]),(0,t.Wm)(o,{type:"danger",size:"small",onClick:l=>V(e.row)},{default:(0,t.w5)((()=>[(0,t.Uk)(" 删除 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,t.Wm)(F,{small:"",background:"",layout:"prev, pager, next",total:p.total,"page-size":p.limit,onCurrentChange:w,class:"pager mt-4"},null,8,["total","page-size"])]),(0,t.Wm)(z,{modelValue:h.value,"onUpdate:modelValue":l[5]||(l[5]=e=>h.value=e),title:"add"==v.value?"新增用户":"编辑用户",width:"35%","before-close":_},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{inline:!0,model:b,ref:"userForm"},{default:(0,t.w5)((()=>[(0,t.Wm)(q,null,{default:(0,t.w5)((()=>[(0,t.Wm)($,{span:12},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{label:"线程软件",prop:"software",rules:[{required:!0,message:"线程软件不能为空"}]},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{modelValue:b.software,"onUpdate:modelValue":l[1]||(l[1]=e=>b.software=e),placeholder:"请输入线程软件"},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.Wm)($,{span:12},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{label:"工程负责人",prop:"name",rules:[{required:!0,message:"工程负责人不能为空"}]},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{modelValue:b.name,"onUpdate:modelValue":l[2]||(l[2]=e=>b.name=e),placeholder:"请输入工程负责人"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,t.Wm)(q,null,{default:(0,t.w5)((()=>[(0,t.Wm)($,{span:12},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{label:"工作部门",prop:"department",rules:[{required:!0,message:"工作部门不能为空"}]},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{modelValue:b.department,"onUpdate:modelValue":l[3]||(l[3]=e=>b.department=e),placeholder:"请输入工作部门"},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.Wm)($,{span:12},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{label:"电话",prop:"phoneNumber",rules:[{required:!0,message:"电话不能为空"}]},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{modelValue:b.phoneNumber,"onUpdate:modelValue":l[4]||(l[4]=e=>b.phoneNumber=e),modelModifiers:{number:!0},placeholder:"请输入电话"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,t.Wm)(q,{style:{"justify-content":"flex-end"}},{default:(0,t.w5)((()=>[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Wm)(o,{type:"primary",onClick:g},{default:(0,t.w5)((()=>[(0,t.Uk)("取消")])),_:1}),(0,t.Wm)(o,{type:"primary",onClick:W},{default:(0,t.w5)((()=>[(0,t.Uk)("确定")])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"])])}}},p=a(89);const i=(0,p.Z)(n,[["__scopeId","data-v-658d50b8"]]);var w=i}}]);
//# sourceMappingURL=32.55895ea3.js.map